<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理页面</title>
    <link href="/resource/css/bootstrap.min.css" rel="stylesheet">
    <script src="/resource/js/lib/jquery3.2.1.js"></script>
    <script src="/resource/js/lib/bootstrap.js"></script>
    <script src="/resource/js/lib/angular.min.js"></script>
    <script src="/resource/js/lib/angular-ui-router.min.js"></script>
    <style>
        .row.top {
            height: 80px;
            background-color: #4786d2;
        }
        .logo-img {
            height: 100%;
            width: 75%;
            font-size: 30px;
            color: white;
            padding: 20px;
            float: left;
        }
        .time-show {
            float: left;
            width: 25%;
            height: 80px;
            font-size: 20px;
            color: #44ff4b;
            line-height: 80px;
        }
        .main-body{

        }
        .left-container {
            background-color: #000000;
            width: 15%;
            height: 802px;
            padding-top: 40px;
            float: left;
        }

        div.left-list-item{
            height: 50px;
            width: 100%;
            color: rgb(255, 251, 255);
            cursor: pointer;
            text-align:center;
            font-size: 20px;
            line-height: 50px;
        }
        div.left-list-item:hover{
            background-color: #0063a1;
            color: rgb(255, 103, 73);
        }
        div.left-list-item.select{
            background-color: #0063a1;
            color: rgb(255, 103, 73);
        }
        div.left-list-item.unselect{

        }
        /*右侧css*/
        div.right-container{
            width: 85%;
            float: left;
        }

    </style>
    <script>
        var myApp = angular.module('adminApp', ['ui.router']);

        //路由重定向
        myApp.config(function($stateProvider){
                $stateProvider
                    .state('0', {
                        url:'/orderManager',
                        templateUrl: 'tmpl/orderManager.html',
                    })
                    .state('1', {
                        url: '/userManager',
                        templateUrl: 'tmpl/userManager.html',
                    })
                    .state('2', {
                        url: '/goodManager',
                        templateUrl: 'tmpl/goodManager.html'
                    })
                    .state('welcome', {
                        url: '/welcome',
                        templateUrl: "tmpl/adminWelcome"
                    })
            }
        );

        myApp.run(function($state) {
              $state.go('welcome');
        });

        myApp.controller("adminController", function ($rootScope, $scope, $http, $timeout, $interval, $state, $injector) {


            $scope.orderState = {0:"待付款", 1:"订单已付款,待发货", 2:"订单已发货", 3:"订单已完成"}
            //左侧栏菜单页面
            $scope.menuArray = new Array('订单管理', '用户管理', '商品管理' );

            //时间模块
            $scope.current_time = new Date();
            $interval(function () {
                $scope.current_time = new Date();
            }, 1000);

            $scope.chSelectMenu = function (index) {
                $scope.selectMenu= index;
                //切换页面
                $state.go(index.toString())
                updatePage(index)
            }
            var updatePage = function (index) {
                switch (index){
                    case 0:
                        $http.get("/adminIndex/queryShoppingOrder").success(function (response) {
                            $scope.orderlist = response.data;
                        })
                        break;
                    case 1:
                        $http.get("/adminIndex/queryUserInfo").success(function (response) {
                            console.log( response.data);
                            $scope.userlist = response.data;
                        })
                        break;
                    case 2: break;
                }
            }
        });

    </script>
</head>
<body ng-app="adminApp" ng-controller="adminController">

<div class="container-fluid">
    <div class="row top">
        <div class="logo-img">网上商城后台管理系统</div>
        <div class="time-show">{{current_time | date:'yyyy-MM-dd hh:mm:ss'}}</div>
    </div>
    <div class="row main-body">
        <div class="left-container" style="align:center" ng-init="selectMenu=0">
            <div class="left-list-item" ng-class="{true:'select', false:'unselect'}[selectMenu == $index]"
                 ng-click="chSelectMenu($index)" ng-repeat="menu in menuArray">
                    {{menuArray[$index]}}
            </div>
        </div>
        <div class="right-container container" >
            <ui-view>

            </ui-view>
        </div>
    </div>
</div>

</body>
</html>